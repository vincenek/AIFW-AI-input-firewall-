<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EUR/USD Chart GPT</title>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #121212;
            color: white;
        }
        #chart {
            height: 500px;
        }
        #chat-box {
            padding: 1rem;
            background: #1e1e1e;
        }
        #response {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #ccc;
        }
    </style>
</head>
<body>
    <div id="chart"></div>
    <div id="chat-box">
        <input type="text" id="chat-input" placeholder="Ask something like 'Show April 2025'" style="width:80%;padding:0.5rem;">
        <button onclick="handleQuery()">Ask</button>
        <div id="response"></div>
    </div>

    <script>
        const chart = LightweightCharts.createChart(document.getElementById('chart'), {
            layout: {
                background: { color: '#121212' },
                textColor: 'white'
            },
            grid: {
                vertLines: { color: '#2B2B43' },
                horzLines: { color: '#2B2B43' },
            },
            timeScale: {
                timeVisible: true,
                secondsVisible: false,
            }
        });

        const candleSeries = chart.addCandlestickSeries();

        // NOTE: Replace the [] below with your actual JSON candle data
        const rawData = []; // <- PASTE chart_data_json HERE

        candleSeries.setData(rawData);

        function handleQuery() {
            const input = document.getElementById('chat-input').value.toLowerCase();
            const responseBox = document.getElementById('response');

            let match = input.match(/(january|february|march|april|may|june|july|august|september|october|november|december)[ ]?(\\d{{4}})?/i);
            if (match) {
                const monthNames = {
                    january: 0, february: 1, march: 2, april: 3, may: 4, june: 5,
                    july: 6, august: 7, september: 8, october: 9, november: 10, december: 11
                };
                const month = monthNames[match[1]];
                const year = parseInt(match[2]) || 2025;
                const from = new Date(year, month, 1).getTime() / 1000;
                const to = new Date(year, month + 1, 1).getTime() / 1000;

                const filtered = rawData.filter(d => d.time >= from && d.time < to);
                if (filtered.length) {
                    candleSeries.setData(filtered);
                    responseBox.textContent = "Showing data for " + match[1] + " " + year;
                } else {
                    responseBox.textContent = "No data available for " + match[1] + " " + year;
                }
            } else {
                responseBox.textContent = "Try asking: 'Show April 2025'";
            }
        }
    </script>
</body>
</html>